<!DOCTYPE html>
<html lang="en">

<body>
<h2>AUDIOS</h2>



</body>
</html>

{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Audio | Voice Generator</title>

    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,800italic,700italic,600italic,400italic,300italic,800,700,600'
          rel='stylesheet' type='text/css'>

    <link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/font-awesome.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/responsive.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/magnific-popup.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/animate.css' %}" rel="stylesheet" type="text/css">

    <script
			  src="https://code.jquery.com/jquery-1.12.4.min.js"
			  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
			  crossorigin="anonymous"></script>

    <script type="text/javascript" src="{% static 'js/bootstrap.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery-scrolltofixed.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery.easing.1.3.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery.isotope.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/wow.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/classie.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/magnific-popup.js' %}"></script>

</head>

<body>
{% comment %}
<header class="header" id="header">
    <!--header-start-->

</header>
{%  endcomment %}
<div class="container text-center">
    {#    <div class="we-create animated fadeInUp delay-1s">#}
    <div id="uploadaudio" class="row min-vh-100 align-content-center justify-content-center">
    <div class="col-md-3"></div>
        <div class="col-md-6 p-2">
            <h2>Step 1: Select Reference Audio</h2>
            <p>Import new audio</p>
            <div class="form p-2 m-0">

                <form action="" method="POST" id="uploadAudioForm" role="form" class="contactForm"
                      enctype="multipart/form-data">
                    {% csrf_token %}
{#                    {{ audioUploadForm.as_table }}#}

                    <input type="text" class="form-control form-control-sm m-1" placeholder="Title" name="title">
                    <input type="file" class="form-control-file m-1" placeholder="Audio File" name="audio">
                    <div class="text-center">
                        <button type="submit" value="Save" class="input-btn small">Upload Audio</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-3"></div>

        {#    </div>#}
        {#    <div class="row" style="background-color: #ffffff">#}
        <div class="col-md-12 m-4">
            {% if audios.count > 0 %}

                <table class="table table-bordered table-responsive-md table-striped">

                    <thead>
                    <tr>
                        <th>Select</th>
                        <th>Title</th>
                        <th>Content</th>
                        <th>Play</th>
                        <th>Delete</th>
                    </tr>
                    </thead>

                    <tbody>


                    {% for i in audios %}
                        <tr>
                            <td><input type="radio" name="audioName" value="{{ i.audio.url }}"></td>
                            <td>{{ i.title }}</td>
                            <td>
                                {{ i.audio.url }}
                            </td>
                            <td>
                                <a href="{{ i.audio.url }}" target="_blank">
                                    <i class="fa fa-play-circle fa-2x"> </i>
                                </a>
                            </td>
                        <td>
                            <i class="fa fa-trash fa-2x" style="color: red"></i>
                        </td>
                        </tr>
                    {% endfor %}

                    </tbody>
                </table>
                </div>
             </div>

                <hr>

                <div class="row min-vh-100" id="entertext" style="display: none;">
                    <div class="col-md-12">
                    <h2>Step 2: Enter Text To render</h2>

                        <div class="form">
                            <textarea name="name" id="textToGenerate" cols="80" rows="10"></textarea>
                            <div class="text-center mt-5">

                                <button type="button" value="Save" id="doGenerateAudio" class="input-btn">Generate
                                    AUDIO
                                </button>
                                <div style="display: none" id="progress" class="spinner-border text-warning"></div>
                            </div>
                            <div class="text-center mt-5">
                                <a class="btn btn-warning" value="Save" id="downloadAudio"
                                   href="/media/audios/generated/test.wav" disabled="true">Download
                                    Audio</a>
                            </div>

                        </div>

                    </div>
                </div>
            {% else %}

                <div class="text-center">
                    <h5 class="error-text m-4"> Please upload at least one the audio to get started.</h5>
                </div>
            {% endif %}
    {#    </div>#}
</div>

<script>

    {#let enteredText = $('#entertext')#}

    $("input[name='audioName']").change('click', function(){
        $('#entertext').css("display","block");
         let scrollTop = $('#entertext').offset().top;
            $(window).scrollTop(scrollTop);
    });
    $(function () {
        $("#uploadAudioForm").submit(
            function (e) {
                e.preventDefault();
                let form = $(this)[0];
                let data = new FormData(form);
                data.append("username_ofaudiouploaded", "{{ request.user }}");
                $.ajax({
                    type: "POST",
                    enctype: "multipart/form-data",
                    url: "/api/audio/",
                    data: data,
                    processData: false,
                    contentType: false,
                    cache: false,
                    timeout: 600000,
                    success: function (data) {
                        console.log(data);
                        location.reload();
                    },
                    error: function (e) {
                        console.error("ERROR ", e);
                    }
                })
            }
        )
    })

    $("#doGenerateAudio").click(function () {
        let csrfToken = $('{% csrf_token %}').val();
        let audioPath = $('input[name="audioName"]:checked').val();
        let text = $('#textToGenerate').val();
        console.log(csrfToken, audioPath, text);
        $("#progress").css("display","block");
        $("#doGenerateAudio").css("display","none");
        $.ajax({
            type: "POST",
            url: "/generate_audio/",
            data: {
                text: text,
                audioName: audioPath,
                csrfmiddlewaretoken: csrfToken
            },
            success: function (data) {
                console.log(data);
                $("#downloadAudio").prop('disabled',false);
                  $("#progress").css("display","none");
                  $("#doGenerateAudio").css("display","block");
            },
            error: function (e) {
                  $("#progress").css("display","none");
                $('#progress').css("display","block");
                console.error("ERROR ", e);
            }
        })
    })
</script>
<script type="text/javascript">
    $(document).ready(function (e) {

        $('#test').scrollToFixed();
        $('.res-nav_click').click(function () {
            $('.main-nav').slideToggle();
            return false

        });

        $('.Portfolio-box').magnificPopup({
            delegate: 'a',
            type: 'image'
        });

    });
</script>

<script>
    wow = new WOW({
        animateClass: 'animated',
        offset: 100
    });
    wow.init();
</script>


<script type="text/javascript">
    $(window).load(function () {

        $('.main-nav li a, .servicelink').bind('click', function (event) {
            var $anchor = $(this);

            $('html, body').stop().animate({
                scrollTop: $($anchor.attr('href')).offset().top
            }, 1500, 'easeInOutExpo');
            /*
            if you don't want to use the easing effects:
            $('html, body').stop().animate({
                scrollTop: $($anchor.attr('href')).offset().top
            }, 1000);
            */
            if ($(window).width() < 768) {
                $('.main-nav').hide();
            }
            event.preventDefault();
        });
    })
</script>

<script type="text/javascript">
    $(window).load(function () {


        var $container = $('.portfolioContainer'),
            $body = $('body'),
            colW = 375,
            columns = null;


        $container.isotope({
            // disable window resizing
            resizable: true,
            masonry: {
                columnWidth: colW
            }
        });

        $(window).smartresize(function () {
            // check if columns has changed
            var currentColumns = Math.floor(($body.width() - 30) / colW);
            if (currentColumns !== columns) {
                // set new column count
                columns = currentColumns;
                // apply width to container manually, then trigger relayout
                $container.width(columns * colW)
                    .isotope('reLayout');
            }

        }).smartresize(); // trigger resize to set container width
        $('.portfolioFilter a').click(function () {
            $('.portfolioFilter .current').removeClass('current');
            $(this).addClass('current');

            var selector = $(this).attr('data-filter');
            $container.isotope({

                filter: selector,
            });
            return false;
        });

    });
</script>

</body>
</html>


  

